<!DOCTYPE html>
<html lang = 'ru'>
<head>
 	<meta name = 'viewport' content = 'width = device-width, initial-scale = 1, maximum-scale = 1, minimum-scale = 1, user-scalable = no, minimal-ui'>
	<meta charset = "UTF-8">
	<meta name = 'full-screen' content = 'yes'>
	<meta http-equiv = "X-UA-Compatible" content = "ie=edge">
	<link rel = "stylesheet" href = "/styles/bootstrap.css">
	 <link rel = "stylesheet" href = "/styles/style.css"> 
	<link rel = 'prefetch' href = '/styles/bootstrap.css' as = 'style'>
	<link rel = 'prefetch' href = '/js/noty.min.js' as = 'script'>
	<link rel = 'prefetch' href = '/js/jquery.js' as = 'script'>
	<link rel = 'prefetch' href = '/js/jquery-ui.min.js' as = 'script'>
	<link rel = 'prefetch' href = '/js/jquery.ui.touch-punch.min.js' as = 'script'>
	<link rel = 'prefetch' href = '/js/sweetalert.min.js' as = 'script'>
	<link rel = 'prefetch' href = '/js/socket.io-2.3.1.slim.js' as = 'script'>

	<link rel = 'prefetch' href = '/styles/img/user.svg' as = 'image'>
	<link rel = 'prefetch' href = '/styles/img/random.svg' as = 'image'>
	<link rel = 'prefetch' href = '/styles/img/clear.svg' as = 'image'>
	<link rel = 'prefetch' href = '/styles/img/checkmark.svg' as = 'image'>

	<link rel = 'prefetch' href = '/styles/img/loser.svg' as = 'image'>
	<link rel = 'prefetch' href = '/styles/img/winner.svg' as = 'image'>

	<meta property = 'og:title' content = '–ú–æ—Ä—Å–∫–æ–π –±–æ–π'>
	<meta property = 'og:site_name' content = '–ú–æ—Ä—Å–∫–æ–π –±–æ–π'>
	<meta property = 'og:description' content = '–ú–æ—Ä—Å–∫–æ–π –±–æ–π ‚Äî –æ–Ω–ª–∞–π–Ω-–∏–≥—Ä–∞ –¥–ª—è –¥–≤—É—Ö —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤. –ó–∞—Ö–æ–¥–∏—Ç–µ, —Ä–∞—Å—Å—Ç–∞–≤–ª—è–π—Ç–µ –∫–æ—Ä–∞–±–ª–∏, –¥–æ–∂–¥–∏—Ç–µ—Å—å –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –∏ –Ω–∞—á–∏–Ω–∞–π—Ç–µ –∏–≥—Ä–∞—Ç—å –≤–¥–≤–æ–µ–º.'>
	<meta property = 'og:image' content = '/img/preview.png'>
	
	<link rel = 'preload' href = '/styles/fonts/Rubik-Regular.ttf' as = 'font' crossorigin>

	<link rel = 'shortcut icon' href = '/img/favicon.svg'>

	<!-- <link rel="prerender" href="//localhost:3000/create" /> -->

	<title>–ú–æ—Ä—Å–∫–æ–π –±–æ–π</title>

	<style>
	

		* {
			margin:  0;
			padding: 0;
			-webkit-user-select: none;
			box-sizing: border-box;
			text-align: center;
			outline: none !important;
			font-family: Rubik
		}
          
		body{
			color: rgb(247, 54, 15);
		}
		.connection-block {
			width: 100%;
			display: flex;
			justify-content: center;
			align-items: center;
			flex-direction: row;
			background-color: #FFF;
			border-radius: 20px;
		}

		.line {
			display: flex;
			justify-content: center;
			align-items: center;
			position: relative;
		}

		.vertical-line {
			height: 100%;
			width: 5%;
			padding: 48px 32px;
		}

		.horizontal-line {
			width: 75%;
			height: 5%;
			padding: 32px;
		}

		.line:after {
			content: '';
			background: lightgray;
			position: absolute;
		}

		.vertical-line:after {
			width: 2px;
			height: 100%;
		}

		.horizontal-line:after {
			width: 100%;
			height: 2px;
		}
		
		.line p {
			background: #FFF;
			display: flex;
			justify-content: center;
			align-items: center;
			z-index: 1;
			margin-bottom: 0;
		}

		.vertical-line p {
			height: 40px;
		}

		.horizontal-line p {
			width: 50px;
		}

		.connection-column {
			z-index: 2;
		}

		@media (max-width: 767px) {
			.connection-block {
				flex-direction: column;
			}
			.vertical-line {
				display: none;
			}
		}

		@media (min-width: 768px){
			.connection-block {
				flex-direction: row;
			}
			.horizontal-line {
				display: none;
			}
		}
		.smp{
			
			background-image: url('https://www.oldtokyo.com/wp-content/uploads/2019/08/scan0005-3.jpg');
		}
		.py-3{
			background-color: #FFF;
		}

	</style>

 </head>
 <body class=" smp">
	
	<div class = ' d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm'>
	<h4 class = 'my-0 mr-md-auto'>–ú–æ—Ä—Å–∫–æ–π –±–æ–π üóæ</h4>
	
	</div>
	
 	<div class = 'container'>
		<div class = 'py-3 text-center'>
			<h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ú–æ—Ä—Å–∫–æ–π –±–æ–π! üóæ</h1>
		</div>
		<div class = 'connection-block'>
			
			<div class = 'connection-column'>
				<form id = 'connection-form' class = 'd-flex justify-content-center flex-column'>
					<label for = 'room-id' class = 'text-center h5'>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã</label>
					<input type='text' name = 'room-id' id = 'room-id' class = 'form-control mb-3' autocomplete = 'off' maxlength = '20' placeholder = '–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã'>
					<input type = 'submit' value = '–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è' class = 'btn btn-primary' id = 'submit-button'>
				</form>
			</div>
			<div class = 'line vertical-line'><p class = 'h5'>–∏–ª–∏</p></div>
			<div class = 'line horizontal-line'><p class = 'h5'>–∏–ª–∏</p></div>
			<div class = 'connection-column'>
				<button class = 'btn btn-primary' onclick = 'window.location = "/create"'>
					–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
				</button>
			</div>
		</div>

		<!-- <hr> -->
	</div>
	<script src = '/js/socket.io.4.2.0.min.js'></script>
	<script>
		query = (query) => document.querySelector(query)
		queryAll = (query) => document.querySelectorAll(query)

		const socket = io({
			transports: ['websocket']
		})

		function init(){
			let roomIdInput = query('#room-id')
			query('#connection-form').onsubmit = function(e){
				e.preventDefault()
				if (roomIdInput.value){
					socket.emit('connect to room', {roomId: roomIdInput.value})
				}
			}

			socket.on('connect to room', function(data){
				window.location = `/room/${data.roomId}`
			})

			socket.on('connecting room not found', function(){
				swal('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è','–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è –∫–æ–º–Ω–∞—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞','error')
			})

			socket.on('connecting room is full', function(){
				swal('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è','–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è –∫–æ–º–Ω–∞—Ç–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞','error').then(() => {
					roomIdInput.value = ''
				})
			})
			socket.on('console log', function (data){
				console.log(data)
			})
		}

		window.onload = init
	</script>
	<script src = '/js/sweetalert.min.js' defer async></script>
 </body>
 </html> 
